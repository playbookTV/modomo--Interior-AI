# Railway-Complete Requirements for Modomo Scraper
# All AI dependencies included for full functionality

# === CORE FRAMEWORK ===
fastapi
uvicorn[standard]
pydantic

# === AI/ML CORE ===
# PyTorch - CPU optimized for Railway
torch==2.1.2+cpu
torchvision==0.16.2+cpu
torchaudio==2.1.2+cpu
-f https://download.pytorch.org/whl/torch_stable.html

# Computer Vision & Image Processing
opencv-python-headless
Pillow
scikit-image

# === ENHANCED CLASSIFICATION SYSTEM ===
# NLP for keyword processing
nltk
spacy
scikit-learn

# ML Utilities
numpy
scipy
pandas

# === AI MODEL DEPENDENCIES ===
# Transformers for CLIP and other models
transformers>=4.30.0,<4.40.0
sentence-transformers>=2.2.0,<3.0.0
huggingface-hub>=0.19.0

# OpenAI CLIP (for embeddings)
# Install CLIP from git for latest compatibility
git+https://github.com/openai/CLIP.git

# Additional AI dependencies
tokenizers
safetensors
timm

# Color processing
webcolors
matplotlib
seaborn

# === OBJECT DETECTION MODELS ===
# Ultralytics YOLO (for grounding_dino fallback)
ultralytics>=8.0.200  # Python 3.12+ compatible

# === SEGMENTATION MODELS ===
# SAM2 - installed via git in Dockerfile
# git+https://github.com/facebookresearch/segment-anything-2.git

# GroundingDINO dependencies
# Additional dependencies for GroundingDINO
supervision

# === WEB SCRAPING ===
playwright
aiohttp
beautifulsoup4
lxml
requests

# === DATABASE & STORAGE ===
asyncpg
redis
# Supabase and its dependencies  
websockets>=10.0,<12.0
supabase==2.0.0
psycopg2-binary
sqlalchemy

# === CLOUD STORAGE ===
boto3

# === LOGGING & MONITORING ===
structlog
loguru

# === UTILITIES ===
python-dotenv
python-multipart
python-jose[cryptography]
aiofiles

# === IMAGE & VIDEO PROCESSING ===
imageio
tifffile

# === DEVELOPMENT & DEBUGGING ===
rich
click

# === PERFORMANCE ===
ujson
orjson

# === DEPTH & MAP GENERATION ===
# Primary: Depth Anything V2 (best quality, Railway compatible)
# Install from specific branch that fixes dependency conflicts
git+https://github.com/badayvedat/Depth-Anything-V2.git@badayvedat-patch-1

# Fallback: MiDaS via transformers (guaranteed compatibility)
timm>=0.9.0  # Required for DPT/MiDaS models

# Additional depth model dependencies
accelerate>=0.20.0  # For transformers pipeline optimization

# === CELERY TASK QUEUE ===
# Background task processing with Celery
celery[redis]==5.3.4
flower==2.0.1
datasets>=2.14.0,<2.19.0
prometheus-client==0.20.0

# === PERFORMANCE MONITORING ===
psutil

# === ADDITIONAL AI UTILITIES ===
# For advanced image processing
albumentations